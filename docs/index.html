<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>Our Little Princess Amaya</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&family=Poppins:wght@200;300;400&display=swap');

```
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
    }

    :root {
        --blush: #FFE0E6;
        --lavender: #EDE4FF;
        --sky: #E3F2FD;
        --cream: #FFF9E6;
        --rose: #FFCDD2;
        --periwinkle: #C5CAE9;
        --mint: #E0F2F1;
        --gold: #FFE082;
        --pearl: #FAFAFA;
        --gradient-aurora: linear-gradient(135deg, #FFE0E6 0%, #EDE4FF 33%, #E3F2FD 66%, #FFE0E6 100%);
        --gradient-dream: linear-gradient(135deg, #FFCDD2 0%, #C5CAE9 50%, #E0F2F1 100%);
        --gradient-shimmer: linear-gradient(135deg, #FFE082 0%, #FFE0E6 50%, #EDE4FF 100%);
    }

    html, body {
        height: 100%;
        overflow: hidden;
    }

    body {
        font-family: 'Poppins', sans-serif;
        background: var(--pearl);
        position: relative;
        touch-action: none;
    }

    /* App container */
    .app-container {
        height: 100vh;
        height: 100dvh;
        display: flex;
        flex-direction: column;
        position: relative;
        overflow: hidden;
    }

    /* Dreamy background layers */
    .dream-canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
    }

    .aurora-wave {
        position: absolute;
        width: 200%;
        height: 200%;
        top: -50%;
        left: -50%;
        opacity: 0.4;
        filter: blur(80px);
        animation: aurora-flow 25s ease-in-out infinite;
    }

    .aurora-1 {
        background: radial-gradient(ellipse at 30% 40%, var(--blush) 0%, transparent 60%);
    }

    .aurora-2 {
        background: radial-gradient(ellipse at 70% 60%, var(--lavender) 0%, transparent 60%);
        animation-delay: -8s;
        animation-duration: 30s;
    }

    .aurora-3 {
        background: radial-gradient(ellipse at 50% 30%, var(--sky) 0%, transparent 70%);
        animation-delay: -16s;
        animation-duration: 35s;
    }

    @keyframes aurora-flow {
        0%, 100% { transform: rotate(0deg) scale(1) translate(0, 0); }
        25% { transform: rotate(90deg) scale(1.1) translate(5%, -5%); }
        50% { transform: rotate(180deg) scale(0.95) translate(-5%, 5%); }
        75% { transform: rotate(270deg) scale(1.05) translate(3%, -3%); }
    }

    /* Magical overlay */
    .magic-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 1;
        background: 
            radial-gradient(circle at 20% 20%, rgba(255, 255, 255, 0.1) 0%, transparent 50%),
            radial-gradient(circle at 80% 80%, rgba(255, 255, 255, 0.08) 0%, transparent 50%);
        animation: overlay-shift 20s ease-in-out infinite;
    }

    @keyframes overlay-shift {
        0%, 100% { opacity: 0.5; }
        50% { opacity: 0.8; }
    }

    /* Particle field */
    .particle-field {
        position: fixed;
        width: 100%;
        height: 100%;
        pointer-events: none;
        z-index: 90;
    }

    .sparkle {
        position: absolute;
        width: 3px;
        height: 3px;
        background: white;
        border-radius: 50%;
        box-shadow: 
            0 0 6px rgba(255, 255, 255, 0.9),
            0 0 12px rgba(255, 224, 230, 0.6),
            0 0 20px rgba(237, 228, 255, 0.4);
        animation: sparkle-dance 15s linear infinite;
    }

    .fairy-light {
        position: absolute;
        width: 20px;
        height: 20px;
        background: radial-gradient(circle, rgba(255, 255, 255, 0.9) 0%, rgba(255, 224, 230, 0.4) 40%, transparent 70%);
        border-radius: 50%;
        filter: blur(1px);
        animation: fairy-flight 20s ease-in-out infinite;
    }

    .crystal-dust {
        position: absolute;
        width: 8px;
        height: 16px;
        background: linear-gradient(45deg, rgba(255, 255, 255, 0.8), rgba(227, 242, 253, 0.6));
        clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
        animation: crystal-fall 12s linear infinite;
    }

    @keyframes sparkle-dance {
        0% {
            transform: translateY(100vh) translateX(0) scale(0);
            opacity: 0;
        }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% {
            transform: translateY(-20px) translateX(80px) scale(1.5);
            opacity: 0;
        }
    }

    @keyframes fairy-flight {
        0%, 100% {
            transform: translate(0, 0) scale(0.8);
            opacity: 0.5;
        }
        25% {
            transform: translate(60px, -80px) scale(1.2);
            opacity: 0.8;
        }
        50% {
            transform: translate(-40px, -160px) scale(1);
            opacity: 0.7;
        }
        75% {
            transform: translate(40px, -80px) scale(1.1);
            opacity: 0.9;
        }
    }

    @keyframes crystal-fall {
        0% {
            transform: translateY(-20px) rotate(0deg);
            opacity: 0;
        }
        10% { opacity: 0.8; }
        90% { opacity: 0.8; }
        100% {
            transform: translateY(100vh) rotate(720deg);
            opacity: 0;
        }
    }

    /* Compact header */
    .enchanted-header {
        padding: env(safe-area-inset-top) 20px 20px;
        text-align: center;
        position: relative;
        z-index: 10;
        background: linear-gradient(180deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.4) 100%);
        backdrop-filter: blur(20px);
        border-bottom: 1px solid rgba(255, 255, 255, 0.5);
    }

    .crown-container {
        position: relative;
        display: inline-block;
        margin-bottom: 15px;
    }

    .crown {
        font-size: 2.5rem;
        background: linear-gradient(135deg, #FFD700, #FFAB00, #FFD700);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5));
        animation: crown-glow 3s ease-in-out infinite;
    }

    @keyframes crown-glow {
        0%, 100% { transform: scale(1); filter: drop-shadow(0 0 20px rgba(255, 215, 0, 0.5)); }
        50% { transform: scale(1.1); filter: drop-shadow(0 0 30px rgba(255, 215, 0, 0.8)); }
    }

    .magic-circles {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        width: 80px;
        height: 80px;
        pointer-events: none;
    }

    .circle-ring {
        position: absolute;
        width: 100%;
        height: 100%;
        border: 1px solid rgba(255, 215, 0, 0.3);
        border-radius: 50%;
        animation: ring-pulse 3s ease-in-out infinite;
    }

    .circle-ring:nth-child(2) {
        animation-delay: -1s;
    }

    .circle-ring:nth-child(3) {
        animation-delay: -2s;
    }

    @keyframes ring-pulse {
        0%, 100% {
            transform: scale(0.5);
            opacity: 0;
        }
        50% {
            transform: scale(1.5);
            opacity: 0.5;
        }
    }

    .princess-name {
        font-family: 'Cormorant Garamond', serif;
        font-size: 2.2rem;
        font-weight: 300;
        background: var(--gradient-dream);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        letter-spacing: 2px;
        line-height: 1.2;
        margin: 0 20px;
    }

    /* Main content area */
    .memory-sanctuary {
        flex: 1;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
        padding: 20px;
    }

    /* Photo carousel */
    .photo-realm {
        flex: 1;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
        perspective: 1200px;
        touch-action: pan-y pinch-zoom;
    }

    .memory-card {
        position: absolute;
        width: 85%;
        max-width: 320px;
        transform-style: preserve-3d;
        transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        cursor: pointer;
    }

    .card-inner {
        position: relative;
        background: white;
        border-radius: 20px;
        padding: 12px 12px 60px;
        box-shadow: 
            0 20px 60px rgba(0, 0, 0, 0.15),
            0 0 0 1px rgba(255, 255, 255, 0.8) inset;
        overflow: visible;
    }

    .card-glow {
        position: absolute;
        top: -4px;
        left: -4px;
        right: -4px;
        bottom: -4px;
        background: var(--gradient-aurora);
        border-radius: 24px;
        opacity: 0.6;
        filter: blur(8px);
        z-index: -1;
        animation: glow-pulse 4s ease-in-out infinite;
    }

    @keyframes glow-pulse {
        0%, 100% { opacity: 0.6; transform: scale(1); }
        50% { opacity: 0.8; transform: scale(1.02); }
    }

    /* Card decorations */
    .ribbon-accent {
        position: absolute;
        width: 90px;
        height: 25px;
        top: -12px;
        left: 50%;
        transform: translateX(-50%) rotate(-1deg);
        background: linear-gradient(90deg, transparent 5%, var(--rose) 20%, var(--blush) 50%, var(--rose) 80%, transparent 95%);
        opacity: 0.8;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .gem-accent {
        position: absolute;
        width: 35px;
        height: 35px;
        bottom: 12px;
        right: 12px;
        background: radial-gradient(circle at 30% 30%, var(--sky), var(--periwinkle));
        border-radius: 50%;
        box-shadow: 
            0 3px 12px rgba(0, 0, 0, 0.2),
            inset -2px -2px 4px rgba(0, 0, 0, 0.15),
            inset 2px 2px 4px rgba(255, 255, 255, 0.6);
        animation: gem-twinkle 3s ease-in-out infinite;
    }

    @keyframes gem-twinkle {
        0%, 100% { transform: scale(1) rotate(0deg); }
        50% { transform: scale(1.1) rotate(5deg); }
    }

    .corner-decoration {
        position: absolute;
        font-size: 1.5rem;
        top: -15px;
        right: -15px;
        filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.1));
        animation: decoration-float 4s ease-in-out infinite;
    }

    @keyframes decoration-float {
        0%, 100% { transform: translateY(0) rotate(-10deg); }
        50% { transform: translateY(-3px) rotate(10deg); }
    }

    /* Photo area */
    .photo-window {
        width: 100%;
        height: 320px;
        border-radius: 12px;
        background: var(--gradient-shimmer);
        position: relative;
        overflow: hidden;
        box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.05);
    }

    .photo-shimmer {
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(45deg, transparent 30%, rgba(255, 255, 255, 0.4) 50%, transparent 70%);
        animation: shimmer-sweep 3s infinite;
    }

    @keyframes shimmer-sweep {
        0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
        100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
    }

    .photo-placeholder {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 5rem;
        opacity: 0.1;
        animation: placeholder-breathe 4s ease-in-out infinite;
    }

    @keyframes placeholder-breathe {
        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.1; }
        50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.15; }
    }

    /* Navigation dots */
    .crystal-nav {
        display: flex;
        justify-content: center;
        gap: 12px;
        padding: 20px;
        position: relative;
        z-index: 10;
    }

    .nav-crystal {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: linear-gradient(135deg, var(--lavender), var(--blush));
        opacity: 0.4;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }

    .nav-crystal::before {
        content: '';
        position: absolute;
        top: -6px;
        left: -6px;
        right: -6px;
        bottom: -6px;
        border-radius: 50%;
        background: radial-gradient(circle, var(--blush), transparent);
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.3s ease;
    }

    .nav-crystal.active {
        opacity: 1;
        transform: scale(1.2);
        background: linear-gradient(135deg, var(--rose), var(--periwinkle));
        box-shadow: 
            0 0 12px rgba(255, 205, 210, 0.6),
            0 2px 8px rgba(0, 0, 0, 0.2);
    }

    .nav-crystal.active::before {
        opacity: 0.5;
        transform: scale(1);
    }

    /* Footer */
    .enchanted-footer {
        padding: 20px 20px env(safe-area-inset-bottom);
        text-align: center;
        font-size: 0.9rem;
        color: var(--periwinkle);
        letter-spacing: 2px;
        font-weight: 200;
        position: relative;
        z-index: 10;
    }

    .footer-sparkles {
        display: inline-block;
        margin: 0 10px;
        font-size: 1.2rem;
        animation: sparkle-rotate 3s linear infinite;
    }

    @keyframes sparkle-rotate {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }

    /* Touch feedback */
    .touch-ripple {
        position: fixed;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: radial-gradient(circle, rgba(255, 224, 230, 0.6), rgba(237, 228, 255, 0.4), transparent);
        pointer-events: none;
        transform: translate(-50%, -50%) scale(0);
        animation: ripple-expand 0.6s ease-out;
        z-index: 200;
    }

    @keyframes ripple-expand {
        to {
            transform: translate(-50%, -50%) scale(3);
            opacity: 0;
        }
    }

    /* Photo stack positioning */
    .memory-card:nth-child(1) { z-index: 6; }
    .memory-card:nth-child(2) { z-index: 5; transform: translateX(10px) translateY(10px) rotate(2deg) scale(0.98); }
    .memory-card:nth-child(3) { z-index: 4; transform: translateX(-10px) translateY(20px) rotate(-2deg) scale(0.96); }
    .memory-card:nth-child(4) { z-index: 3; transform: translateX(15px) translateY(30px) rotate(3deg) scale(0.94); }
    .memory-card:nth-child(5) { z-index: 2; transform: translateX(-15px) translateY(40px) rotate(-3deg) scale(0.92); }
    .memory-card:nth-child(6) { z-index: 1; transform: translateX(5px) translateY(50px) rotate(1deg) scale(0.9); }

    .memory-card.active {
        z-index: 10;
        transform: translateX(0) translateY(0) rotate(0deg) scale(1.05);
    }

    /* Unique decorations per card */
    .memory-card:nth-child(1) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--blush) 20%, var(--rose) 50%, var(--blush) 80%, transparent 95%); }
    .memory-card:nth-child(2) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--lavender) 20%, var(--periwinkle) 50%, var(--lavender) 80%, transparent 95%); }
    .memory-card:nth-child(3) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--sky) 20%, var(--mint) 50%, var(--sky) 80%, transparent 95%); }
    .memory-card:nth-child(4) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--gold) 20%, var(--cream) 50%, var(--gold) 80%, transparent 95%); }
    .memory-card:nth-child(5) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--mint) 20%, var(--sky) 50%, var(--mint) 80%, transparent 95%); }
    .memory-card:nth-child(6) .ribbon-accent { background: linear-gradient(90deg, transparent 5%, var(--cream) 20%, var(--gold) 50%, var(--cream) 80%, transparent 95%); }

    .memory-card:nth-child(1) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--rose), var(--blush)); }
    .memory-card:nth-child(2) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--periwinkle), var(--lavender)); }
    .memory-card:nth-child(3) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--mint), var(--sky)); }
    .memory-card:nth-child(4) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--cream), var(--gold)); }
    .memory-card:nth-child(5) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--sky), var(--mint)); }
    .memory-card:nth-child(6) .gem-accent { background: radial-gradient(circle at 30% 30%, var(--gold), var(--cream)); }
</style>
```

</head>
<body>
    <div class="app-container">
        <!-- Background layers -->
        <div class="dream-canvas">
            <div class="aurora-wave aurora-1"></div>
            <div class="aurora-wave aurora-2"></div>
            <div class="aurora-wave aurora-3"></div>
        </div>
        <div class="magic-overlay"></div>

```
    <!-- Particle field -->
    <div class="particle-field" id="particleField"></div>

    <!-- Header -->
    <header class="enchanted-header">
        <div class="crown-container">
            <div class="magic-circles">
                <div class="circle-ring"></div>
                <div class="circle-ring"></div>
                <div class="circle-ring"></div>
            </div>
            <div class="crown">👑</div>
        </div>
        <h1 class="princess-name">Our Little Princess Amaya</h1>
    </header>

    <!-- Main content -->
    <main class="memory-sanctuary">
        <div class="photo-realm" id="photoRealm">
            <!-- Memory Card 1 -->
            <div class="memory-card active" data-index="0">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">✨</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">👶</div>
                    </div>
                </div>
            </div>

            <!-- Memory Card 2 -->
            <div class="memory-card" data-index="1">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">🌸</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">🍼</div>
                    </div>
                </div>
            </div>

            <!-- Memory Card 3 -->
            <div class="memory-card" data-index="2">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">🦋</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">🌙</div>
                    </div>
                </div>
            </div>

            <!-- Memory Card 4 -->
            <div class="memory-card" data-index="3">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">⭐</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">🎀</div>
                    </div>
                </div>
            </div>

            <!-- Memory Card 5 -->
            <div class="memory-card" data-index="4">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">🌺</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">🌈</div>
                    </div>
                </div>
            </div>

            <!-- Memory Card 6 -->
            <div class="memory-card" data-index="5">
                <div class="card-inner">
                    <div class="card-glow"></div>
                    <div class="ribbon-accent"></div>
                    <div class="gem-accent"></div>
                    <div class="corner-decoration">💕</div>
                    <div class="photo-window">
                        <div class="photo-shimmer"></div>
                        <div class="photo-placeholder">👨‍👩‍👧</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Navigation -->
        <nav class="crystal-nav" id="crystalNav">
            <div class="nav-crystal active" data-index="0"></div>
            <div class="nav-crystal" data-index="1"></div>
            <div class="nav-crystal" data-index="2"></div>
            <div class="nav-crystal" data-index="3"></div>
            <div class="nav-crystal" data-index="4"></div>
            <div class="nav-crystal" data-index="5"></div>
        </nav>
    </main>

    <!-- Footer -->
    <footer class="enchanted-footer">
        <span class="footer-sparkles">✦</span>
        Forever Our Princess
        <span class="footer-sparkles">✦</span>
    </footer>
</div>

<script>
    // Professional mobile app controller
    class EnchantedScrapbook {
        constructor() {
            this.cards = document.querySelectorAll('.memory-card');
            this.navDots = document.querySelectorAll('.nav-crystal');
            this.currentIndex = 0;
            this.touchStartX = 0;
            this.touchStartY = 0;
            this.isDragging = false;
            this.threshold = 50;
            
            this.init();
        }

        init() {
            this.setupTouch();
            this.setupNavigation();
            this.setupParticles();
            this.preventOverscroll();
        }

        setupTouch() {
            const realm = document.getElementById('photoRealm');
            let currentCard = null;
            let startTransform = '';

            realm.addEventListener('touchstart', (e) => {
                if (e.touches.length !== 1) return;
                
                this.touchStartX = e.touches[0].clientX;
                this.touchStartY = e.touches[0].clientY;
                this.isDragging = false;
                
                currentCard = this.cards[this.currentIndex];
                startTransform = currentCard.style.transform;
                currentCard.style.transition = 'none';
            });

            realm.addEventListener('touchmove', (e) => {
                if (!currentCard || e.touches.length !== 1) return;
                
                const deltaX = e.touches[0].clientX - this.touchStartX;
                const deltaY = e.touches[0].clientY - this.touchStartY;
                
                if (Math.abs(deltaX) > 10 || Math.abs(deltaY) > 10) {
                    this.isDragging = true;
                    e.preventDefault();
                }
                
                if (this.isDragging) {
                    const rotation = deltaX * 0.1;
                    const scale = 1.05 - Math.abs(deltaX) * 0.0002;
                    currentCard.style.transform = `translateX(${deltaX * 0.3}px) rotate(${rotation}deg) scale(${scale})`;
                }
            });

            realm.addEventListener('touchend', (e) => {
                if (!currentCard) return;
                
                currentCard.style.transition = '';
                const deltaX = e.changedTouches[0].clientX - this.touchStartX;
                
                if (this.isDragging && Math.abs(deltaX) > this.threshold) {
                    if (deltaX > 0 && this.currentIndex > 0) {
                        this.navigate(this.currentIndex - 1);
                    } else if (deltaX < 0 && this.currentIndex < this.cards.length - 1) {
                        this.navigate(this.currentIndex + 1);
                    } else {
                        this.updateStack();
                    }
                } else {
                    this.updateStack();
                }
                
                currentCard = null;
                this.isDragging = false;
            });

            // Touch feedback
            document.addEventListener('touchstart', (e) => {
                this.createRipple(e.touches[0].clientX, e.touches[0].clientY);
            });
        }

        setupNavigation() {
            this.navDots.forEach((dot, index) => {
                dot.addEventListener('click', () => {
                    this.navigate(index);
                });
            });
        }

        navigate(index) {
            this.currentIndex = index;
            this.updateStack();
            this.updateNav();
        }

        updateStack() {
            this.cards.forEach((card, index) => {
                card.classList.remove('active');
                
                const offset = index - this.currentIndex;
                const absOffset = Math.abs(offset);
                const direction = offset > 0 ? 1 : -1;
                
                if (offset === 0) {
                    card.classList.add('active');
                    card.style.transform = 'translateX(0) translateY(0) rotate(0deg) scale(1.05)';
                    card.style.zIndex = 10;
                    card.style.opacity = 1;
                } else if (absOffset <= 3) {
                    const translateX = offset * 10;
                    const translateY = absOffset * 10;
                    const rotate = offset * 2;
                    const scale = 1 - absOffset * 0.05;
                    
                    card.style.transform = `translateX(${translateX}px) translateY(${translateY}px) rotate(${rotate}deg) scale(${scale})`;
                    card.style.zIndex = 10 - absOffset;
                    card.style.opacity = 1 - absOffset * 0.15;
                } else {
                    card.style.opacity = 0;
                    card.style.zIndex = 0;
                }
            });
        }

        updateNav() {
            this.navDots.forEach((dot, index) => {
                dot.classList.toggle('active', index === this.currentIndex);
            });
        }

        createRipple(x, y) {
            const ripple = document.createElement('div');
            ripple.className = 'touch-ripple';
            ripple.style.left = x + 'px';
            ripple.style.top = y + 'px';
            document.body.appendChild(ripple);
            
            setTimeout(() => ripple.remove(), 600);
        }

        setupParticles() {
            const field = document.getElementById('particleField');
            
            // Create initial particles
            for (let i = 0; i < 15; i++) {
                this.createParticle('sparkle', field);
            }
            for (let i = 0; i < 8; i++) {
                this.createParticle('fairy-light', field);
            }
            for (let i = 0; i < 10; i++) {
                this.createParticle('crystal-dust', field);
            }
            
            // Continuous generation
            setInterval(() => {
                if (Math.random() > 0.6) this.createParticle('sparkle', field);
                if (Math.random() > 0.8) this.createParticle('fairy-light', field);
                if (Math.random() > 0.7) this.createParticle('crystal-dust', field);
            }, 2000);
        }

        createParticle(type, container) {
            const particle = document.createElement('div');
            particle.className = type;
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDelay = Math.random() * 5 + 's';
            particle.style.animationDuration = (10 + Math.random() * 10) + 's';
            
            container.appendChild(particle);
            
            // Cleanup
            const duration = parseFloat(particle.style.animationDuration) * 1000;
            setTimeout(() => particle.remove(), duration);
        }

        preventOverscroll() {
            document.body.addEventListener('touchmove', (e) => {
                if (e.target.closest('.photo-realm')) {
                    e.preventDefault();
                }
            }, { passive: false });
        }
    }

    // Initialize on load
    document.addEventListener('DOMContentLoaded', () => {
        new EnchantedScrapbook();
        
        // Prevent zoom
        document.addEventListener('gesturestart', (e) => e.preventDefault());
        
        // Handle orientation changes
        window.addEventListener('orientationchange', () => {
            setTimeout(() => {
                window.scrollTo(0, 0);
            }, 100);
        });
    });

    // Service worker for offline capability (optional)
    if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
            navigator.serviceWorker.register('/sw.js').catch(() => {});
        });
    }
</script>
```

</body>
</html>
